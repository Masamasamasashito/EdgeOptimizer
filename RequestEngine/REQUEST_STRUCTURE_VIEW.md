# リクエスト構造から理解する — API Gateway / Request Engine

「メソッドリクエスト → 統合リクエスト → バックエンド → 統合レスポンス → メソッドレスポンス」を**各ステージのデータ構造**として捉えてみる

---

## なぜ「リクエスト構造」で見るか

多くの説明は**役割名**（メソッドリクエスト、統合リクエスト、Lambda 統合…）で終わる。  
ここでは、**各ステージで「どの形のデータが入力で、どの形が出力か」**をはっきりさせる。

- **構造を決めてから実装する** → 契約が明瞭になり、手戻りが減る  
- **境界ごとの変換だけを書く** → 責任範囲が分かれ、テスト・変更が楽になる  
- **クライアント契約とバックエンド契約を分けて考える** → プロキシ・マッピングの設計がしやすくなる  

「リクエスト構造から理解する」とは、**フローを「中身の形」の変遷**として追うこと。

---

## 各ステージの「構造」

### 1. メソッドリクエスト（Method Request）

**意味**: クライアントが Gateway に送るものの**契約**。

- **入力**: クライアントから見た「送っていい形」
- **例**: `POST /warmup`、Body は `{ "data": { "url", "token", "headers", ... } }`
- **設計のポイント**: クライアント（n8n など）が本当に送れる形になっているか。必須・オプション・名前をここで確定させる。

→ ここを曖昧にすると、後段の「統合」で余計な変換や if が増える。

---

### 2. 統合リクエスト（Integration Request）

**意味**: メソッドリクエストを**バックエンドが食べやすい形**に変換した結果。

- **入力**: メソッドリクエストの出力（パース済み・検証済み）
- **出力**: バックエンド呼び出しに渡す構造（例: `{ url, headers }`、または Lambda の event 用のオブジェクト）
- **設計のポイント**:
  - 「クライアントの形」と「バックエンドの形」の**差分**をここ一か所に集約する  
  - トークン検証・ヘッダ正規化・デフォルト値はすべて「統合リクエスト」の責務として扱う  

→ ここがきれいだと、バックエンドを差し替えても変更箇所が少ない。

---

### 3. バックエンド呼び出し（Lambda 統合 / fetch 等）

**意味**: 統合リクエストの**出力構造だけ**を使って、実際の処理を行う。

- **入力**: 統合リクエストが用意した形（例: `targetUrl`, `headers`）
- **出力**: バックエンド固有の結果（例: HTTP レスポンス、ステータス、ヘッダ、Body サイズ、TTFB）
- **設計のポイント**: バックエンドは「統合リクエストの型」だけ知っていればよい。クライアントの生の形式は知らない。

→ Request Engine では、ここが `fetch(targetUrl, { headers })` に対応する。

---

### 4. 統合レスポンス（Integration Response）

**意味**: バックエンドの出力を**クライアントが期待する形**に変換する。

- **入力**: バックエンドの生の結果（status, headers, body size, ttfb 等）
- **出力**: クライアント契約に合った形（例: フラットな `headers.general.status-code`, `eo.measure.Initial_Response_ms` など）
- **設計のポイント**:
  - クライアント（n8n / Aggregator）が「こういうキーで欲しい」という**契約**をここで満たす  
  - プロキシ統合に近い場合は「透過＋薄い整形」、そうでない場合は「マッピング」と割り切る  

→ ここをきちんと決めておくと、フロントや集約側の変更に振り回されにくい。

---

### 5. メソッドレスポンス（Method Response）

**意味**: クライアントに返す最終的な**契約**。

- **出力**: HTTP ステータス、Content-Type、Body の形（例: 常に 200 + フラット JSON）
- **設計のポイント**: 「統合レスポンスの出力」が、そのままメソッドレスポンスの Body になるか、ラップするかだけ決める。

→ Request Engine では「200 + フラット JSON」というひとつの契約に統一している。

---

## Request Engine での対応関係（構造ベース）

| ステージ             | 入力の形 | 出力の形 |
|----------------------|----------|----------|
| メソッドリクエスト   | n8nからのリクエスト | 直下に記載 |
| 統合リクエスト       | パース済み Body + 検証 | `targetUrl`, `headers`（Host 除外済み）、トークン OK |
| バックエンド呼び出し | `fetch(url, { headers })` の引数 | `Response`（status, headers, body） |
| 統合レスポンス       | `Response` + 計測値 | フラット JSON（`headers.*`, `eo.measure.*` 等） |
| メソッドレスポンス   | 統合レスポンスの JSON | `200` + その JSON を Body にした HTTP レスポンス |

「何が入力で何が出力か」をこの表で揃えておくと、プラットフォーム（Lambda / Worker / Cloud Run / Azure）が変わっても、**同じ表で設計を揃えられる**。

**n8nからのリクエスト**
```
[
  { 
    "data": {
      "targetUrl": "https://sample.com/wp-content/uploads/2026/01/category-img-ai-development-300x158.png",
      "urltype": "asset",
      "tokenCalculatedByN8n": "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
      "headers": {
          "User-Agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 17_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.0 Mobile/15E148 Safari/604.1",
          "Accept-Language": "ja,ja-JP;q=0.9,en-US;q=0.8,en;q=0.7"
      },
      "userAgentLabel": "ios_safari_17",
      "cloud_type_area": "GcpCloudFunctions_asia-northeast1",
      "httpRequestNumber": 1080,
      "httpRequestUUID": "35f82b79-d28c-4608-b131-3e8a8f952cd6",
      "httpRequestRoundID": 1770189191
    }  
  }
]
```
---

## 開発速度・設計が変わる理由

1. **契約が先になる**  
   メソッドリクエスト／メソッドレスポンスの形を先に決めるので、「とりあえず動かしてから直す」が減る。

2. **変更が局所になる**  
   クライアント形式が変わったら「統合リクエスト」、バックエンド仕様が変わったら「バックエンド＋統合レスポンス」だけ見ればよい。

3. **テストの単位がはっきりする**  
   各ステージを「入力構造 → 出力構造」の変換としてテストできる（例: 統合リクエストのテストは、メソッドリクエスト相当のオブジェクトを入れて、バックエンド渡し用の形が出るかだけ見ればよい）。

4. **設計レビューがしやすい**  
   「ここはメソッドリクエストの契約違反」「この変換は統合レスポンスの責務」のように、用語と構造で会話できる。

---

## API Gateway と Request Engine — ユースケース・メリデメ・違い

### 1. ユースケース

| 観点 | API Gateway（本家） | Request Engine（EO） |
|------|---------------------|------------------------|
| **主な用途** | 汎用 API の公開・ルーティング・認証・課金 | n8n からの Warmup リクエストをエッジに飛ばし、TTFB/Duration 等を計測して返す |
| **呼び出し元** | 不特定のクライアント（Web / モバイル / 他システム） | **n8n に限られず、API Gateway と同様**に不特定のクライアントが呼び出し元になり得る。認証はプラットフォーム認証（Credentials 等）＋トークンで二重検証 |
| **バックエンド** | Lambda / HTTP / 他サービスなど**複数種・複数ルート**を切り替え可能 | **単一パターン**: 受け取った `url` へ GET するだけ（実質プロキシ＋計測） |
| **契約の数** | リソース・メソッドごとにメソッドリクエスト／レスポンスを**多数**定義可能 | **1 エンドポイント 1 契約**（`data: { url, token, headers, ... }` ⇔ フラット JSON） |
| **運用フェーズ** | 本番 API のライフサイクル全体（ステージ・デプロイ・ロールバック・Usage Plan） | 計測・Warmup 専用の「使い捨て的に近い」関数＝**本番 API としては持たない** |
| **リクエスト・レスポンスの場** | クライアント→Gateway は公網、**Gateway→バックエンドは多くがクラウド内**（Lambda 呼び出し等）。公網へ出るのは「クライアントが叩く入口」が中心 | **バックエンド呼び出しそのものがパブリックインターネット上**。受け取った `url` に対して GET し、その往復（TTFB・Duration 等）を計測して返す＝**公網上の任意 URL とのリクエスト・レスポンス**が本質 |

---

### 2. メリット・デメリット

| 区分 | API Gateway（本家） | Request Engine（EO） |
|------|---------------------|------------------------|
| **メリット** | ・リソース・ステージ・Usage Plan・API Key など**管理機能が豊富**<br>・VTL マッピングで変換をコードレスに変更可能<br>・WAF・キャッシュ・スロットリングなど**周辺サービスと連携**しやすい<br>・複数バックエンド・複数契約を**一つの API で束ねる**のに向く | ・**実装が単純**で、ステージの対応関係をそのまま 1 関数に落とせる<br>・**依存が少ない**（API Gateway というプロダクトが不要）<br>・**マルチクラウド**（Lambda / Cloud Run / Azure / CF Workers）で同じ「構造」を再利用できる<br>・用途が Warmup＋計測に限定されているぶん**設計・検証の範囲が狭く済む** |
| **デメリット** | ・**学習コスト・設定量**が大きい（メソッド／統合／マッピングの理解が前提）<br>・「1 契約・1 用途」のために API Gateway を本格運用するには**過剰**になりがち<br>・リージョン・ステージ・キャッシュなど**運用オプションが多い**ぶん、判断が増える | ・**複数リソース・複数契約**には向かない（増やすなら関数／ルートを増やす設計になる）<br>・マッピングやスロットリングなどは**自前実装**が必要<br>・「使い捨て的」を前提にしているため、**汎用 API 基盤としての拡張性**は意図的に抑えている |

---

### 3. 違いの一覧（何が同じで何が違うか）

| 項目 | API Gateway | Request Engine | 備考 |
|------|-------------|----------------|------|
| **リクエスト構造の 5 ステージ** | メソッド → 統合 → バックエンド → 統合 → メソッド | 同じ考え方で 1 本のコードに実装 | 設計の「言語」は共通 |
| **プロダクト** | AWS API Gateway（マネージド） | 自前のサーバレス関数（Lambda / CF Workers / Cloud Run / Azure） | RE は「Gateway としての製品」を使わない |
| **契約の数** | リソース・メソッドごとに複数 | 実質 1 つ（Warmup 用 JSON ⇔ フラット JSON） | RE は単一ユースケース |
| **マッピング** | VTL / マッピングテンプレートで設定 | コード内でパース・検証・`formatFlatResult` | RE はコードで「統合」を実装 |
| **認証** | IAM・Lambda Authorizer・API Key 等 | プラットフォーム認証（IAM / Function Key / OAuth 等）＋トークン検証 | **呼び出し元は n8n に限られず、API Gateway と同様**（任意のクライアントが認証・トークン条件を満たせば呼び出し可能） |
| **バックエンド** | Lambda / HTTP / 他統合を選択可能 | 固定で「`fetch(url)` 相当」 | RE のバックエンド＝ターゲット URL |
| **リクエスト・レスポンスの場（公網の扱い）** | クライアント→Gateway は公網。Gateway→バックエンドは**多くがクラウド内**（Lambda 等）で、公網経由ではない | **パブリックインターネット上でリクエスト・レスポンスを行う**。RE が `fetch(ターゲットURL)` する先は公網上の任意 URL。計測・Warmup の本質が「公網との往復」 | **大きな違い**：RE は「公網上の URL へ出ていく」ことが前提 |
| **スロットリング・Usage Plan** | 標準で利用可能 | なし（必要なら n8n 側や前段で制御） | RE はシンプルさ優先 |
| **ステージ・デプロイ** | ステージ・デプロイ単位で管理 | 各クラウドの通常の関数デプロイ | RE は「API としてのステージ」を持たない |
| **マルチクラウド** | AWS 専用 | Lambda / Cloud Run / Azure / CF Workers で同一「構造」を再利用 | RE は構造を揃えて持ち運び可能 |

---

### 4. 選び方の目安

```
「不特定多数に API を公開する」「複数リソース・複数契約を一本の API で扱う」
  → API Gateway（本家）を検討

「n8n から決まった形式で Warmup を飛ばし、計測結果をフラット JSON で返すだけ」
  → Request Engine のような「構造は同じ・実装は使い捨て的」で足りる
```

両方とも「メソッドリクエスト → 統合リクエスト → バックエンド → 統合レスポンス → メソッドレスポンス」という**構造の流れ**で整理すると、Gateway 本家か RE かは「契約の数」「運用の重さ」に加え、**「リクエスト・レスポンスをパブリックインターネット上で行うか」**の違いとしても扱いやすい。RE は「公網上の任意 URL へ GET してその結果を返す」ことが前提である点が、API Gateway の典型（Gateway→Lambda はクラウド内）との大きな違いである。

---

### 5. 地球規模のスクレイピング・ウォームアップ・Surface調査、国境なきAIデータ収集

以上の性質を踏まえると、**地球規模でグローバルにスクレイピング・ウォームアップ・Surface調査を行いたい人**、あるいは**国境なきAIデータ収集**をしたい人にとって、Request Engine は**非常に適している**。

| 観点 | Request Engine が合う理由 |
|------|---------------------------|
| **公網が主戦場** | バックエンド呼び出しそのものが**パブリックインターネット上**のリクエスト・レスポンス。任意の国・地域の URL へ GET し、TTFB・Duration・ヘッダ等を返す設計そのものが「地球規模の Surface 調査」と一致する。 |
| **呼び出し元を限定しない** | n8n に限られず、API Gateway と同様に**任意のクライアント**（n8n、スクリプト、他サービス、AIパイプライン）が認証・トークン条件を満たせば呼び出し可能。データ収集オーケストレーターがどこにあってもよい。 |
| **マルチクラウド・多リージョン** | Lambda / Cloud Run / Azure / Cloudflare Workers で**同一の「構造」**を再利用できる。各地域・各クラウドに RE を並べることで、**国境やリージョンをまたいだ同一契約**でウォームアップ・計測・Surface 調査を揃えられる。 |
| **単一契約・軽量** | 1 エンドポイント 1 契約のフラット JSON 入出力。スクレイピング／ウォームアップ／Surface の結果を**AIデータ収集パイプライン**に組み込みやすく、実装も「使い捨て的」で足りるぶん、多数のエンドポイントを運用しやすい。 |
| **計測・Warmup が本質** | 受け取った `url` へ GET し、その往復（TTFB、Duration、ヘッダ、Body サイズ等）を返す。ウォームアップと Surface 調査はそのまま、スクレイピングは「Surface の延長」（必要なメタを返す）として位置づけやすい。 |

結論として、**「国境なきAIデータ収集」**のように、様々な拠点から公網上の URL にアクセスし、その結果を統一的に集約したい需要には、Request Engine はかなり良い選択肢になる。

---

### 6. SaaS化とSwitcher相当機能 — ニーズの伸び

**n8n に代わる Request Engine の SaaS 提供**と、**n8n の Switcher ノードに相当する「どの RE（どのリージョン・クラウド・エンドポイント）に振るか」を条件・ルールで切り替える機能**を、GUI や API でユーザーが簡単に使えるようにすると、**ニーズはかなり上がる**可能性が高い。

| 観点 | 理由 |
|------|------|
| **n8n 不要で RE だけ使える** | n8n のセットアップ・運用をせず、RE の「公網上の URL へ GET → 計測結果を返す」だけを SaaS として使える。ウォームアップ・Surface・軽いスクレイピング目的のユーザーの**参入障壁が下がる**。 |
| **Switcher 相当＝マルチリージョン・マルチクラウドの切り替え** | n8n の Switcher は「条件で枝分かれ」するが、RE 文脈では「**どの RE に振るか**」（apne1 / jpeast / ane1 / CF Workers など）の切り替えに相当する。地域・コンプライアンス・負荷に応じてエンドポイントを選びたい需要と直結する。 |
| **GUI で可視化・操作** | どのリージョン・どのクラウドにリクエストが飛んでいるか、ルール（国別・URL パターン・時間帯など）でどう切り替わるかを GUI 上で見られ、ノーコードで設定できると、**非エンジニアも「国境なき計測」を組める**。 |
| **API でパイプラインに組み込み** | 同一契約の REST/API で「どの RE に振るか」を指定でき、AI データ収集・オーケストレーター側から制御できる。n8n に依存しない運用が増えるぶん、**既存ワークフロー以外のユーザー層**が広がる。 |
| **Switcher の代わりを SaaS 側に集約** | 従来は n8n の Switcher ノードで「どの 280 ノード（どの RE）を叩くか」を分岐していた。そのロジックを **SaaS 側の「ルーティング・Switcher 相当」** に寄せ、ユーザーは「ルールを選ぶ／API で指定する」だけで済むようにすると、n8n ユーザーだけでなく**任意のオーケストレーター**から同じ体験を提供できる。 |

まとめると、**Request Engine を SaaS として提供し、Switcher 相当の「どれに振るか」を GUI/API で簡単に扱える**ようにすることは、地球規模・国境なきデータ収集をしたい層の**ニーズをかなり押し上げる**要因になり得る。

---

### 7. 想定されるニーズの種類と欲求の強さ

#### 想定されるニーズの種類

| ニーズの種類 | 内容例 | RE／SaaS＋Switcher 相当との関係 |
|--------------|--------|----------------------------------|
| **CDN・キャッシュのウォームアップ** | 配信開始前や更新後に、複数リージョンから対象 URL へ GET してエッジを温めたい | RE のコアユース。Switcher 相当で「どのリージョンから温めるか」を GUI/API で切り替えたい。 |
| **多地域からの Surface 調査・可用性監視** | 「各国・各地域から見て、その URL はどう返るか」を TTFB・ステータス・ヘッダで把握したい | 公網上の RE が各地にあり、Switcher 相当で地域・ルールを選びたい。 |
| **国境なきスクレイピング・AIデータ収集の基盤** | 学習用・分析用に、複数拠点から公網 URL にアクセスし、結果を同一フォーマットで集約したい | RE の単一契約＋多リージョン配置と相性が良い。拠点切り替えを Switcher 相当で行いたい。 |
| **コンプライアンス・データレジデンシー** | 「EU からのアクセスは EU 内の RE へ」「特定国向けはその国リージョンの RE へ」といったルールで振り分けたい | Switcher 相当の「どれに振るか」がそのままルーティングルール。GUI/API で簡単に変えられると需要が明確。 |
| **パフォーマンス計測・地域間比較** | 同一 URL を複数リージョンから叩き、TTFB・Duration を比較して「どこが遅いか」を可視化したい | RE が計測の実行者。Switcher 相当で「どの RE に振るか」＝計測拠点の選択になる。 |
| **軽量プロキシ・計測ゲートウェイ** | 「ただ URL を渡して、どこかしらから GET して結果を返してほしい」だけのゲートウェイが欲しい | n8n なしで RE だけ使いたい層。SaaS で RE＋ルーティングを提供すると、そのまま該当。 |

---

#### ニーズの欲求は強い？ 弱い？

| 評価の軸 | 強い要因 | 弱い要因 |
|----------|----------|----------|
| **痛みの明確さ** | 自前で多リージョン・マルチクラウドの「計測ゲートウェイ」を組むと、設計・運用・Switcher 相当の分岐ロジックの保守が重い。「やってみたが辛い」と感じる層は少なくない。 | 「単一リージョンで十分」なユーザーには、RE や Switcher 相当の価値は伝わりにくい。 |
| **代替の有無** | 「公網上の任意 URL へ GET ＋ 計測結果を返す」を、**複数リージョン・複数クラウドで同一契約**にし、**どれに振るか**を GUI/API で簡単に切り替えられる SaaS は、あまりない。 | 自前 RE（n8n＋RE）、汎用プロキシ、既存監視サービスで「なんとかなる」と感じる層はいる。 |
| **支払意思との結びつき** | ウォームアップ・Surface・データ収集は、**遅延・障害・データ不足**がそのままビジネス損失になりやすい。「遅れ・抜け」を減らしたいニーズは説明しやすく、予算化されやすい。 | ニーズを持つ層が「開発者・データチーム」に偏るほど、予算権限や意思決定までの距離によっては、欲求が「強いが購買に至らない」ことがある。 |
| **市場の広がり** | 「地球規模・国境なき」を**本当に**やる組織は、CDN 配信、グローバルサイト、AI 学習データ収集、監視を手がける企業に集中する。その層では**同じ悩みを抱えている**ことが多い。 | 全体市場で見ると、「地球規模のウォームアップ・Surface・スクレイピング基盤」に特化したニーズは**ニッチ**。汎用監視・汎用スクレイピングよりは狭い。 |

**結論（欲求の強さ）**

- **ニッチではあるが、そのニッチでは欲求は強い**。「地球規模でウォームアップ・Surface・スクレイピング基盤を、複数拠点から同一契約で、かつ『どれに振るか』を楽に切り替えたい」という層にとって、RE を軸にした SaaS＋Switcher 相当は、**痛みと解がはっきりしており、代替が少ない**。
- したがって、**ニーズの欲求は中〜強**とみるのが妥当。市場規模はニッチだが、該当するユーザーには「強く欲する」と評価できる。SaaS 化・GUI/API・Switcher 相当の充実度が、その層での「どれだけ強いか」をさらに引き上げる要因になる。

---

### 8. WEBSHARE と Request Engine — 強み・弱み

**WEBSHARE（Webshare）** は、スクレイピング向けの**プロキシサービス**（データセンター／レジデンシャルプロキシ、多数の IP、ジオタゲティング等）を提供する。Request Engine は「公網上の任意 URL へ GET し、TTFB・Duration・ヘッダ等を計測して返す」**計測・ウォームアップ・Surface 用のゲートウェイ**であり、役割が異なる。以下はその前提での強み・弱みの整理である。

#### Request Engine の強み（vs WEBSHARE）

| 観点 | 内容 |
|------|------|
| **計測・メトリクスが本質** | RE は「url を渡すと、その往復の TTFB・Duration・ヘッダ・Body サイズ」を**構造化して返す**。WEBSHARE はプロキシ IP を提供するだけで、計測結果の形はユーザー側で組み立てる必要がある。ウォームアップ・Surface 調査を「結果の形まで含めて揃えたい」需要には RE が向く。 |
| **単一契約・軽量** | 「url ＋ token ＋ headers を送る → フラット JSON で返る」だけ。プロキシの回し方・認証・ローテーションの知識が不要で、**計測・ウォームアップ専用**に使える。WEBSHARE はプロキシ経由でリクエストするためのインフラで、ウォームアップや Surface の「返却フォーマット」は自分で作る。 |
| **拠点＝リージョン・クラウドの選択** | RE は「どのリージョン・どのクラウドの RE に振るか」＝**拠点の選択**になる。Lambda / Cloud Run / Azure / CF Workers で同一構造を再利用し、Switcher 相当で切り替えやすい。WEBSHARE は「どの国のプロキシを使うか」は選べるが、「拠点ごとの計測結果を一括で返すゲートウェイ」ではない。 |
| **ウォームアップ・Surface に特化** | 受け取った url へ GET して、その往復を計測して返すだけ。**CDN ウォームアップ・多地域 Surface 調査**が主目的なら、RE の設計と一致する。WEBSHARE は「ブロックを避けつつ多数の IP からスクレイピングする」用途に強い。 |
| **自前運用・オープン** | RE はコードを自前でデプロイでき、SaaS 化しない場合は**課金・縛りなし**。WEBSHARE は商用プロキシの利用であり、IP 数・トラフィックに応じた料金がかかる。 |

#### Request Engine の弱み（vs WEBSHARE）

| 観点 | 内容 |
|------|------|
| **IP の多様性・隠蔽性** | RE は「そのリージョンのサーバレスから GET する」ため、出口 IP はクラウドのもので、**IP ローテーション・多数 IP** はない。WEBSHARE は多数のデータセンター／レジデンシャル IP を提供し、「どこから見えるか」「ブロックされにくい IP」の切り替えが得意。 |
| **ブロック回避・スケール** | レート制限・IP ブロックを避けるための「多数 IP」「residential っぽさ」は WEBSHARE の強み。RE は WAF バイパス用の `x-eo-re` 等はあるが、**IP 多様性でのブロック回避**には向かない。 |
| **即効性・運用負荷** | WEBSHARE は「契約すればすぐプロキシが使える」。RE は自前デプロイ or SaaS が必要で、リージョンごとのデプロイ・Switcher 相当の構築は**初期コストがかかる**（SaaS 化すれば軽減される）。 |
| **汎用スクレイピングとの相性** | **大量 URL を多数 IP から、ブロックを避けながら回す**スクレイピングには、WEBSHARE のようなプロキシプールが向く。RE は「拠点ごとの計測・ウォームアップ・Surface」向きで、**IP ローテーション主体の大規模スクレイピング**とは役割が違う。 |

#### 使い分けの目安

| やりたいこと | 向くのは |
|--------------|----------|
| **CDN ウォームアップ・多地域 Surface 調査・計測結果を同じ形で集約** | Request Engine（＋Switcher 相当） |
| **多数 IP からブロックを避けつつスクレイピング** | WEBSHARE 等のプロキシサービス |
| **「どこから見えるか」の細かいジオ・IP 制御** | WEBSHARE 等 |
| **「どの拠点から叩いたか」と「TTFB・Duration 等」を一括で得る** | Request Engine |

結論として、**RE と WEBSHARE は役割が違い、競合ではなく補完的**。ウォームアップ・Surface・計測の「拠点選択と結果の形を揃えたい」需要には RE が強く、**IP 多様性・ブロック回避・大規模スクレイピング**には WEBSHARE が強い。

---

### 9. IP 多様性の付加可能性

**Request Engine に IP 多様性を付加することは技術的に可能**である。ただし、実装方法とトレードオフがある。

#### 実装アプローチ

| アプローチ | 内容 | メリット | デメリット |
|-----------|------|----------|------------|
| **プロキシプールの統合** | RE の実装内で、WEBSHARE 等のプロキシサービスを経由してリクエストを飛ばすオプションを追加。リクエスト時に「プロキシ経由モード」を指定し、プロキシリストをローテーションする。 | ・既存のプロキシサービス（WEBSHARE、Bright Data 等）を活用できる<br>・RE の「計測結果を構造化して返す」強みを保ちつつ、IP 多様性を追加できる<br>・プロキシの管理・ローテーションを RE 側で自動化できる | ・プロキシサービスの料金が追加でかかる<br>・プロキシ経由のレイテンシが増える（計測値に影響）<br>・プロキシの可用性・品質に依存する |
| **複数出口 IP を持つインフラ** | 複数のサーバレス関数を異なる VPC/ネットワークからデプロイし、それぞれ異なる出口 IP を持つようにする。または、複数の NAT Gateway / エンドポイントを用意して IP を切り替える。 | ・プロキシサービスに依存しない<br>・RE の「自前運用・オープン」の強みを保てる | ・IP の多様性は限定的（クラウドの出口 IP の範囲内）<br>・VPC/NAT のコストが増える<br>・「多数 IP」というより「複数 IP」程度になる |
| **ハイブリッドアプローチ** | RE 自体は「拠点選択」の役割を保ちつつ、プロキシ経由オプションを追加。リクエスト時に「プロキシを使うか」「直接 GET するか」を選択可能にする。 | ・用途に応じて使い分けられる（ウォームアップは直接、スクレイピングはプロキシ経由）<br>・RE の既存の強み（計測・単一契約）を保ちつつ、IP 多様性が必要な場合に対応できる | ・実装が複雑になる（プロキシ管理・ローテーション・フォールバック）<br>・「プロキシ経由モード」の計測値（TTFB・Duration）は「直接モード」と比較可能性が下がる |

#### 設計上の考慮点

- **「拠点選択」と「IP 多様性」の両立**: RE の強みは「どのリージョン・クラウドから叩くか」の選択。IP 多様性を追加する場合も、**「拠点選択」の価値を損なわない**設計が重要（例：プロキシ経由でも「どの拠点の RE からプロキシ経由で飛ばすか」を選べる）。
- **計測値の一貫性**: プロキシ経由の場合、TTFB・Duration は「RE → プロキシ → ターゲット」の往復になる。直接 GET と比較可能性を保つには、**プロキシ経由かどうかをメタデータとして返す**（例: `eo.meta.proxy-enabled: true`）などの工夫がいる。
- **Switcher 相当との統合**: IP 多様性を付加する場合、「どの RE に振るか」に加え、「その RE でプロキシを使うか」「どのプロキシプールを使うか」も Switcher 相当で切り替えられるようにすると、GUI/API での制御がしやすい。

#### 結論

- **IP 多様性の付加は技術的に可能**だが、**このやり方では WEBSHARE に勝てない**。理由：
  - **プロキシプールの統合**を RE に追加しても、WEBSHARE のような専用プロキシサービスが持つ「多数 IP・IP ローテーション・ブロック回避の最適化」には及ばない。
  - RE がプロキシ経由オプションを追加しても、結局は WEBSHARE 等のプロキシサービスに依存し、**RE の独自価値（拠点選択・計測・単一契約）が薄れる**。
  - 「IP 多様性が必要な用途」を RE でカバーしようとすると、実装が複雑になり、**RE の本質である「拠点ごとの計測・ウォームアップ・Surface」に集中できなくなる**。
- **戦略的な結論**: RE は **IP 多様性で WEBSHARE と競合すべきではない**。RE の強みは「拠点選択・計測・単一契約」であり、IP 多様性が必要な用途は **WEBSHARE に任せる**。RE は「どのリージョン・クラウドから叩くか」と「TTFB・Duration 等を構造化して返す」ことに特化し、**WEBSHARE と補完的に使う**（例：WEBSHARE でプロキシ経由スクレイピングをしつつ、RE で拠点ごとの計測・ウォームアップを行う）のが良い。

---

### 10. RE の強みとしての「マルチクラウド＋プラグイン／カスタマイズ」と WEBSHARE への真似られやすさ

**結論から言うと、強みは「マルチクラウドサーバレスとして共通のプラグイン機能を SaaS の GUI から自由に選べる、もしくは自由にカスタマイズできる」ことに据えるべき**である。そのうえで、**WEBSHARE に真似されにくい**。

#### なぜその強みに据えるべきか

| 観点 | 内容 |
|------|------|
| **RE の本質は拠点選択・計測・単一契約** | 「どのリージョン・クラウドから叩くか」と「TTFB・Duration 等を構造化して返す」がコア。IP 多様性で WEBSHARE と競合するのではなく、**マルチクラウド上で「何を有効にするか」を選べる／カスタマイズできる**レイヤーに価値を置く。 |
| **プラグイン＝拡張の共通化** | 「直接 GET」「リトライ」「ヘッダ追加」「計測項目の出し分け」「オプションでプロキシ経由」などを**プラグイン**として切り出し、SaaS の GUI や API から**自由に選べる／組み合わせられる**ようにする。ユーザーは「拠点選択」に加え「どの機能を有効にするか」を選べる。 |
| **カスタマイズ可能にすると差別化が続く** | プラグインを選ぶだけでなく、**自分でカスタムロジックを載せられる**（例：特定ヘッダの付与、返却フォーマットの変更、条件分岐）にすると、「同じ拠点・同じ契約でも中身を自分用にできる」という強みになる。 |

#### WEBSHARE に真似されてしまうか？

| 観点 | 内容 |
|------|------|
| **WEBSHARE の本業はプロキシ IP** | WEBSHARE の強みは「多数 IP・IP ローテーション・ブロック回避・ジオタゲティング」であり、**マルチクラウドサーバレスの「拠点選択・計測・単一契約」を土台にしたプラグイン／カスタマイズ**ではない。 |
| **真似するには別产品・別レイヤーが必要** | WEBSHARE が「マルチクラウドサーバレス＋プラグイン選択／カスタマイズ」をやるには、**プロキシ提供とは別の产品**を組み立てる必要がある。拠点＝リージョン・クラウドの選択、計測結果の構造化、プラグインの組み合わせ UI など、RE がやっているレイヤーは**WEBSHARE の本業の外**にある。 |
| **表面的な真似はされ得るが、土台が違う** | 「GUI でオプションを選べる」といった**表面的なUI**は真似され得る。しかし RE の価値は「**マルチクラウドサーバレスを共通基盤に、同一契約で拠点とプラグインを選べる／カスタマイズできる**」という**土台＋拡張の設計**にある。WEBSHARE はプロキシが土台なので、土台を揃えようとすると自社の強み（IP 多様性）と別軸の投資になる。 |
| **結論** | **WEBSHARE に完全に真似されるリスクは低い**。真似するには「プロキシ以外の土台」に乗り換えるか、並行して別产品を育てる必要があり、本業との一貫性が薄い。RE は**マルチクラウドサーバレス＋プラグイン／カスタマイズ**を強みに据え、WEBSHARE とは「拠点・計測・拡張」vs「IP・ブロック回避」で棲み分けるのがよい。 |

#### 強みの一文にまとめるなら

- **「マルチクラウドサーバレスを共通基盤に、拠点選択とプラグイン機能を SaaS の GUI から自由に選べ、必要ならカスタマイズもできる」**ことを強みにする。
- IP 多様性では WEBSHARE に勝てないので、**そちらで競合しない**。代わりに「どこから叩くか」「何を有効にするか」「どうカスタマイズするか」をユーザーが自由に決められる点を前面に出す。

---

### 11. ネーミング・ポジショニング — 「ボーダレスで柔軟なリクエスト形成プラットフォーム」

**「ボーダレスで柔軟なリクエスト形成プラットフォーム」**というネーミングは、Request Engine の価値を端的に伝える**良いネーミング**である。

#### ネーミングの各要素の意味

| 要素 | 意味 | RE での対応 |
|------|------|-------------|
| **ボーダレス** | 国境・リージョン・クラウドの境界をまたぐ。地理的・インフラ的制約を超えて、**どこからでもリクエストを形成・実行できる**。 | マルチクラウド（Lambda / Cloud Run / Azure / CF Workers）・多リージョン対応。Switcher 相当で「どの拠点から叩くか」を自由に選べる。**国境なきAIデータ収集・地球規模のウォームアップ・Surface調査**の基盤。 |
| **柔軟なリクエスト形成** | リクエストの内容（ヘッダ・パラメータ・メソッド・ボディ）を、用途に応じて**柔軟に組み立てられる**。プラグイン選択・カスタマイズで「何を有効にするか」「どう設定するか」を選べる。 | プラグイン機能（直接 GET・リトライ・ヘッダ追加・計測項目の出し分け等）を SaaS の GUI/API から選べる。必要ならカスタムロジックを載せられる。**単一契約で、用途に応じてリクエストの形を変えられる**。 |
| **プラットフォーム** | マルチクラウドサーバレスを**共通基盤**として提供し、GUI/API で制御可能。ユーザーは「どこから叩くか」「何を有効にするか」を選ぶだけで、裏側のインフラ（Lambda/Cloud Run/Azure/CF Workers）は抽象化される。 | マルチクラウド・多リージョンで**同一の「構造」**（メソッドリクエスト → 統合リクエスト → バックエンド → 統合レスポンス → メソッドレスポンス）を再利用。SaaS 化すれば、ユーザーは「プラットフォーム」として使える。 |

#### このネーミングが良い理由

| 理由 | 内容 |
|------|------|
| **価値が端的に伝わる** | 「ボーダレス」で「国境・リージョンをまたぐ」価値、「柔軟なリクエスト形成」で「用途に応じて組み立てられる」価値、「プラットフォーム」で「共通基盤として使える」価値が、**3語で伝わる**。 |
| **WEBSHARE との差別化が明確** | WEBSHARE は「プロキシサービス」であり、「ボーダレスで柔軟なリクエスト形成プラットフォーム」ではない。RE は「拠点選択・計測・プラグイン選択／カスタマイズ」を前面に出し、**IP 多様性とは別軸**であることが伝わる。 |
| **ターゲット層に響く** | 「国境なきAIデータ収集」「地球規模のウォームアップ・Surface調査」をしたい層にとって、「ボーダレス」は**痛みと解が一致する**キーワード。「柔軟なリクエスト形成」は「用途に応じて変えられる」という価値と直結する。 |
| **拡張性を示せる** | 「プラットフォーム」という言葉は、**プラグイン追加・カスタマイズ・将来の機能拡張**を暗示する。RE が「使い捨て的」ではなく、**拡張可能な基盤**であることを伝えられる。 |

#### 補足・バリエーション

- **短縮版**: 「ボーダレスリクエストプラットフォーム」「柔軟なリクエスト形成基盤」
- **強調版**: 「マルチクラウド・ボーダレスで柔軟なリクエスト形成プラットフォーム」（「マルチクラウド」を明示）
- **用途特化版**: 「ボーダレスで柔軟な計測・ウォームアッププラットフォーム」（「計測・ウォームアップ」を明示）

**結論**: **「ボーダレスで柔軟なリクエスト形成プラットフォーム」**は、RE の価値を端的に伝え、WEBSHARE との差別化も明確で、ターゲット層に響く**良いネーミング**である。

---

### 12. ペンテスト・脆弱性調査向けポジショニング — ブルーオーシャンか

**OWASP ZAP などのペネトレーションテスト製品に付加し、グローバルビッグテックやグローバル企業が脆弱性調査に使うツール**として位置づけると、**ブルーオーシャンに近い**と評価できる。

#### なぜペンテスト・脆弱性調査と相性が良いか

| 観点 | 内容 |
|------|------|
| **ペンテストは「どこから叩くか」が重要** | OWASP ZAP 等は通常、**単一の実行環境**からスキャンする。RE を付加すると、「**同じテストを複数リージョン・複数クラウドから実行**」できる。WAF/CDN の地域別挙動、ジオブロック、リージョン固有の誤設定の検出と相性が良い。 |
| **同一契約・同一フォーマット** | ペンテスト結果を「拠点ごと」に揃えて比較・集約するには、**同じリクエスト構造・同じレスポンス構造**が前提。RE の「単一契約・フラット JSON」は、ZAP 等が「どの拠点からの結果か」をメタで付与する**土台**として使える。 |
| **グローバル企業のニーズ** | グローバルビッグテック・グローバル企業は「**各国・各地域から見た応答の差**」「**リージョンごとの脆弱性・設定差**」を把握したい需要が強い。RE は「ボーダレスで柔軟なリクエスト形成プラットフォーム」として、**多拠点ペンテスト・多拠点脆弱性調査**の基盤になる。 |

#### 「リクエストのバリアントは網羅できるが GEO 分散はできない」— ZAP / Burp / POSTMAN と RE の役割分担

**OWASP ZAP、Burp Suite、POSTMAN などは、リクエストのバリアントパターン（ヘッダ・パラメータ・ペイロード・メソッドの組み合わせ等）を網羅できるが、GEO 分散はできない。その欠けている部分をマルチクラウド Request Engine が補う**、という整理で正しい。

| 観点 | 内容 |
|------|------|
| **ZAP / Burp / POSTMAN が得意なこと** | **リクエストのバリアントパターンの網羅**。同一 URL に対して、様々なヘッダ・クエリパラメータ・ボディ・メソッド・認証の組み合わせを試し、**「どんなリクエストを送るとどう返るか」**を網羅的に検証できる。ペンテスト・API テスト・脆弱性スキャンでは、この**バリアントの網羅**が前提。 |
| **ZAP / Burp / POSTMAN が苦手なこと** | **GEO 分散**。これらは通常**単一の実行環境（自分のマシンまたは一台のランナー）**からリクエストを送る。**「同じリクエストを、東京・シンガポール・欧州・米国からそれぞれ送り、レスポンスの差を見る」**といった**地理的分散（GEO 分散）**は、標準機能ではできない。 |
| **GEO 分散ができないと何が困るか** | WAF/CDN の**地域別挙動**、**ジオブロック**、**リージョン固有の誤設定**、**「どこから見えるか／見えないか」**の検証が、単一拠点からでは不十分。グローバル企業の脆弱性調査・Surface セキュリティチェックでは、**複数拠点からの同一リクエスト**が欲しい。 |
| **マルチクラウド Request Engine が救う** | RE は**マルチクラウド・多リージョン**で同一契約のリクエスト実行基盤。ZAP / Burp / POSTMAN が「**どんなリクエストを送るか（バリアント）**」を担い、RE が「**どこから送るか（GEO 分散）**」を担う。ZAP 等から「この URL にこのリクエストを、apne1 / ane1 / eu-west1 からそれぞれ送ってほしい」と RE に依頼し、結果を拠点別に受け取る、という**役割分担**になる。 |
| **結論** | **リクエストのバリアントパターンは ZAP / Burp / POSTMAN で網羅できるが、GEO 分散はできない。そこをマルチクラウド Request Engine が救う**、という整理で正しい。RE は「GEO 分散の実行基盤」として、既存ツールの**不足している軸**を補う。 |

#### GEO 分散のオプションは既に存在するか？

**「同じリクエストを、東京・シンガポール・欧州・米国からそれぞれ送り、レスポンスの差を見る」といった GEO 分散**について、**ZAP / Burp / POSTMAN の標準オプションとしては存在しない**。一方で、**別の製品・自前構築**では似たことを実現している例はある。

| 観点 | 内容 |
|------|------|
| **ZAP / Burp / POSTMAN 標準** | **GEO 分散のオプションはない**。これらは「単一実行環境からリクエストを送る」前提で、**「どのリージョンから送るか」を選ぶ標準機能**は提供していない。 |
| **Tenable（Nessus / VM）** | **複数リージョンにセンサーを置く**アーキテクチャはある。Tenable Vulnerability Management は「地域のクラウドセンサー」や「リンクされたセンサー」をリージョンごとに配置し、**リージョン別にスキャン**できる。ただし Tenable は **ZAP/Burp とは別のスキャンエンジン**（Nessus / Web App Scanning 等）であり、「**ZAP や Burp のリクエストバリアントをそのまま複数リージョンから実行する**」という形のオプションではない。 |
| **自前構築** | **複数リージョンに ZAP / Burp をそれぞれデプロイ**し、それぞれからスキャンして結果を集約する、という運用は可能。ただしこれは「**オプション**」というより**自前でインフラを組む**話で、拠点ごとのデプロイ・設定・結果のフォーマット統一・集約ロジックを自前で持つ必要がある。 |
| **プロキシ（WEBSHARE 等）** | 「**どの国・地域の出口 IP から見るか**」を選ぶことはできる。ただしプロキシは「**出口の地理的選択**」であり、「**同じテスト（ZAP/Burp のスキャン）を複数拠点から実行し、同一契約で結果を拠点別に返す**」という **GEO 分散の実行基盤**とは役割が違う。ZAP からプロキシ経由でリクエストを飛ばすことはできるが、**拠点ごとの結果の一括集約・同一フォーマット**は自前で組む必要がある。 |
| **結論** | **ZAP / Burp / POSTMAN に「GEO 分散」の標準オプションは存在しない**。Tenable は複数リージョンのスキャン基盤は持つが ZAP/Burp とは別製品。自前構築やプロキシの組み合わせで「似たこと」は可能だが、**「ZAP/Burp のリクエストバリアント ＋ GEO 分散 ＋ 同一契約で拠点別結果を返す」を一体的に提供するオプション**は、現状ほぼない。そこを**マルチクラウド Request Engine**が埋める、という整理でよい。 |

#### Tenable に勝てない？負ける？

**結論：正面から「企業向け VM プラットフォーム」として Tenable と戦うと負ける。ただし「ZAP/Burp の GEO 分散アドオン」というポジションなら、Tenable と競合しないので負けない。**

| 観点 | 内容 |
|------|------|
| **Tenable が強い領域** | **企業向け脆弱性管理プラットフォーム**。Nessus、Web App Scanning、複数リージョンのセンサー、ライセンス・サポート・販売網が充実しており、**「VM を一式 Tenable で揃える」**ニーズには Tenable が強い。RE が「Tenable の代わりに VM 一式を提供する」と位置づけると、**勝てない・負ける**。 |
| **RE が強い領域** | **「ZAP/Burp を既に使っているチームが、GEO 分散だけ足したい」**ニーズ。Tenable は **ZAP/Burp のワークフローをそのまま維持したうえで GEO 分散を付ける**というオプションを出していない。Tenable は「Tenable のスキャンエンジン ＋ 複数リージョン」であり、**ZAP/Burp のリクエストバリアントをそのまま複数拠点から実行する**わけではない。ここは **RE の土俵**。 |
| **競合の土俵をずらす** | **Tenable に勝つ／負ける**ではなく、**土俵をずらす**。「企業向け VM プラットフォーム」では Tenable に負ける。「ZAP/Burp 用の GEO 分散実行基盤」では Tenable はそもそもおらず、**負けない**。 |
| **結論** | **Tenable に正面から勝つ必要はない**。RE は「ZAP/Burp の GEO 分散アドオン」であり、Tenable は「VM プラットフォーム」。**「ZAP/Burp をやめて Tenable に乗り換える」**か**「ZAP/Burp のまま RE で GEO 分散を足す」**かは、顧客の選択。後者を選ぶ層には RE が刺さり、Tenable とは競合しない。 |

#### OWASP ZAP 等への「付加」の形

| 形 | 内容 |
|------|------|
| **プラグイン・拡張** | ZAP に「**RE ノード**」を追加し、スキャン時に「どの拠点（どの RE）からリクエストを送るか」を選べる。結果に `eo.meta.area` 等の拠点情報を付与。 |
| **連携 API** | ZAP が RE の API を呼び出し、指定 URL を指定拠点から GET してレスポンスを取得。ZAP はそのレスポンスを既存のスキャンロジックに渡す。**RE は「多拠点リクエスト実行基盤」**として外付け。 |
| **SaaS 統合** | RE を SaaS 化し、ZAP や他ペンテスト製品から「多拠点実行」をオプションとして選べる。GUI で拠点・プラグインを選び、同一契約で結果を返す。 |

#### ブルーオーシャンかどうか

| 観点 | 内容 |
|------|------|
| **レッドオーシャン** | 「汎用ペンテストツール」（ZAP、Burp 等）や「汎用プロキシ」（WEBSHARE 等）は競合が多い。**単なる「ペンテスト」「プロキシ」では差別化しにくい**。 |
| **ブルーオーシャンに近い理由** | 「**ペンテスト製品に付加された、多拠点・同一契約のリクエスト実行基盤**」として、**グローバル企業の脆弱性調査**に特化したポジションは、**明示的に狙っている製品が少ない**。ZAP 等は「多拠点から同じテストを実行する」機能を標準では持たず、RE がそれを補う**付加価値**になる。 |
| **ニッチだが高単価** | 需要は「グローバルビッグテック・グローバル企業のセキュリティチーム」に限定されがちだが、**単価・契約規模は大きい**。脆弱性調査・コンプライアンスは予算化されやすく、**ブルーオーシャン＝競合が少なく、支払意思が高いニッチ**とみなせる。 |
| **結論** | **ブルーオーシャンに近い**。「OWASP ZAP 等のペンテスト製品に付加し、グローバル企業が多拠点から脆弱性調査に使うツール」という**組み合わせ**は、現状あまり満たされていない。RE を「ボーダレスで柔軟なリクエスト形成プラットフォーム」として、**ペンテスト・脆弱性調査の多拠点実行基盤**に特化すると、競合が少なく、ターゲットの支払意思も高い**ブルーオーシャン的なポジション**になる。 |

#### 射程圏内に日本の上場企業も含めるか

**「グローバル企業」という言葉を広く解すれば、日本の上場企業も十分に射程圏内**である。

| 観点 | 内容 |
|------|------|
| **ガバナンス・予算** | 上場企業は内部統制・セキュリティ・コンプライアンスの予算を持ち、脆弱性調査・ペンテストは**予算化されやすい**。グローバルビッグテックほどでなくても、**上場企業のセキュリティチーム**は十分なターゲットになり得る。 |
| **海外展開・多拠点ニーズ** | 日本の上場企業でも、**海外子会社・海外ユーザー・海外拠点**を持つ例は多い。「各国・各地域から見た応答の差」「リージョンごとの脆弱性・設定差」を把握したいニーズは、**グローバル企業に限らない**。 |
| **国内のみでも価値** | 海外展開がなくても、**国内複数リージョン**（apne1 / ane1 等）から同一テストを実行し、CDN/WAF の挙動差や地域別設定差を確認したい需要はある。**「グローバル」を「多拠点・ボーダレス」と読み替えれば、日本の上場企業も射程内**。 |
| **結論** | **「グローバル企業」に日本の上場企業を明示的に含めると、ターゲットが広がる**。グローバルビッグテック・外資系グローバル企業に加え、**東証プライム・スタンダード等の上場企業**（特に海外展開または多拠点運用をするもの）を射程に据えてよい。 |

#### ブルーオーシャンとしての評価

**結論：ブルーオーシャンとして悪くない。むしろ良いブルーオーシャン**と評価できる。

| 評価の軸 | 内容 |
|----------|------|
| **競合の少なさ** | 「OWASP ZAP 等のペンテスト製品に付加された、多拠点・同一契約のリクエスト実行基盤」として、**グローバル企業（日本の上場企業含む）の脆弱性調査**に特化したポジションは、**明示的に狙っている製品がほとんどない**。ZAP、Burp 等は「多拠点から同じテストを実行する」機能を標準では持たず、RE がそれを補う**付加価値**になる。 |
| **支払意思の高さ** | 脆弱性調査・ペンテスト・コンプライアンスは、**グローバル企業・上場企業のセキュリティチームにとって予算化されやすい**。単価・契約規模は大きい。**ブルーオーシャン＝競合が少なく、支払意思が高いニッチ**という条件を満たしている。 |
| **差別化の明確さ** | RE は「ボーダレスで柔軟なリクエスト形成プラットフォーム」として、**拠点選択・計測・単一契約・プラグイン選択／カスタマイズ**を強みに据える。WEBSHARE（IP 多様性）や汎用ペンテストツール（単一拠点）とは**明確に差別化**できている。 |
| **拡張性・将来性** | ペンテスト・脆弱性調査に加え、**ウォームアップ・Surface 調査・AI データ収集**など、他の用途にも展開可能。プラグイン選択・カスタマイズで「用途に応じて変えられる」ため、**ブルーオーシャンを維持しやすい**。 |
| **結論** | **ブルーオーシャンとして悪くない。むしろ良いブルーオーシャン**。「OWASP ZAP 等のペンテスト製品に付加し、グローバル企業（日本の上場企業含む）が多拠点から脆弱性調査に使うツール」という**組み合わせ**は、競合が少なく、支払意思が高く、差別化が明確で、拡張性もある**良いブルーオーシャン**と評価できる。 |

#### 「本社から他拠点に対して実行」というニーズと地球規模全社共通効率化

**「OWASP ZAP を本社から他拠点に対して実行」というニーズは明確に存在し、脆弱性診断の地球規模全社共通効率化のメリットは大きい**。

| 観点 | 内容 |
|------|------|
| **ニーズの存在** | グローバル企業では、**本社（セキュリティチーム）が各地域・各拠点の Web アプリケーションに対して脆弱性診断を一括で実行したい**需要がある。従来は「各拠点に ZAP をインストール・設定・実行してもらう」か「本社から各拠点の URL を単一拠点からスキャンする」かのどちらかで、**多拠点からの実行は困難**だった。 |
| **地球規模全社共通効率化のメリット** | **メリットは大きい**。理由：<br>1. **一括実行・一括管理**: 本社から「同じテストを複数拠点に対して実行」でき、結果を**同一フォーマット・同一タイミング**で集約できる。各拠点に個別に依頼・管理する必要がなくなる。<br>2. **コスト削減**: 各拠点に ZAP のインストール・設定・運用を依頼するコスト（人件費・時間・管理コスト）が削減される。本社のセキュリティチームが**一括で実行・管理**できる。<br>3. **標準化・比較可能性**: 同じテストを同じタイミングで複数拠点から実行するため、**拠点間の比較**が容易になる。「A 拠点は脆弱だが B 拠点は安全」といった差を、同一条件で把握できる。<br>4. **コンプライアンス・監査対応**: グローバル企業は「全拠点で脆弱性診断を実施している」ことを監査・コンプライアンスで証明する必要がある。本社から一括実行・一括集約できると、**証跡・レポートの作成が容易**になる。 |
| **RE が実現する価値** | RE を OWASP ZAP に付加すると、**本社の ZAP から「どの拠点（どの RE）からリクエストを送るか」を指定**し、同一テストを複数拠点から実行できる。結果は**同一フォーマット（フラット JSON）**で返るため、本社で一括集約・比較・レポート化が容易。**「本社から他拠点に対して実行」というニーズを、RE が満たす**。 |
| **結論** | **ニーズは明確に存在し、メリットは大きい**。「OWASP ZAP を本社から他拠点に対して実行」することで、脆弱性診断の地球規模全社共通効率化が実現でき、コスト削減・標準化・コンプライアンス対応の価値が大きい。RE はその**実現基盤**として位置づけられる。 |

#### ブルーオーシャンかつ明確なコストメリット

**このポジショニングは「ブルーオーシャンかつ、明確なコストメリットを言い出せる」という点で、かなり良い**。

| 観点 | 内容 |
|------|------|
| **ブルーオーシャン** | 「OWASP ZAP 等のペンテスト製品に付加された、多拠点・同一契約のリクエスト実行基盤」として、グローバル企業（日本の上場企業含む）の脆弱性調査に特化したポジションは、**競合がほとんどない**。 |
| **明確なコストメリット** | **コスト削減が数値化しやすい**。例：<br>1. **人件費削減**: 各拠点に ZAP のインストール・設定・運用を依頼する場合、拠点数 × 工数（例：1 拠点あたり 2 時間 × 時給 5,000 円 × 10 拠点 = 10 万円）が削減できる。<br>2. **管理コスト削減**: 各拠点の ZAP 設定・バージョン管理・結果の集約を個別に行うコストが、本社から一括実行・一括集約に置き換わることで削減できる。<br>3. **時間コスト削減**: 各拠点への依頼・待機・集約にかかる時間が、本社から一括実行に置き換わることで削減できる。<br>4. **ツールライセンスコスト削減**: 各拠点に ZAP 等のライセンスを個別に購入する必要がなくなる（RE は SaaS として提供すれば、本社が一括で利用）。 |
| **ROI が説明しやすい** | 「本社から他拠点に対して実行」することで、**コスト削減額が明確**になり、ROI が説明しやすい。グローバル企業・上場企業のセキュリティチームや経営層に対して、「導入により年間 X 万円のコスト削減」「工数 Y 時間の削減」といった**数値で価値を示せる**。 |
| **結論** | **ブルーオーシャンかつ、明確なコストメリットを言い出せる**という点で、このポジショニングは**かなり良い**。競合が少なく、支払意思が高く、差別化が明確で、**コストメリットが数値化しやすい**ため、グローバル企業・上場企業への提案がしやすい。 |

#### 全社のパブリックエンドポイント管理と Surface セキュリティチェックの一元化

**全社のパブリックエンドポイントをグローバル本社で管理し、Surface セキュリティチェックを一元化できる**という価値は、RE の強みと直結する。

| 観点 | 内容 |
|------|------|
| **全社のパブリックエンドポイント管理** | グローバル企業は、**各国・各地域にパブリックに公開されているエンドポイント**（Web サイト、API、サービス等）を多数持つ。従来は「各拠点が自分のエンドポイントを管理・チェックする」か「本社が単一拠点からチェックする」かのどちらかで、**多拠点からの一括管理は困難**だった。RE を使うと、**本社から「どの拠点のどのエンドポイントを、どの拠点からチェックするか」を一括で管理**できる。 |
| **Surface セキュリティチェックの一元化** | **Surface セキュリティ**（外部から見えるエンドポイントのセキュリティ状態）を、本社から一元化してチェックできる。例：<br>1. **脆弱性チェック**: 各拠点のパブリックエンドポイントを、複数拠点から OWASP ZAP 等でスキャンし、結果を本社で一括集約。<br>2. **設定ミス検出**: リージョンごとの設定差（WAF ルール、ヘッダ設定、TLS 設定等）を、多拠点からのリクエストで比較・検出。<br>3. **公開範囲の確認**: 「どのリージョンから見えるか」「どのリージョンから見えないか」を、多拠点からのリクエストで確認。<br>4. **コンプライアンス確認**: 「全拠点のパブリックエンドポイントがセキュリティ基準を満たしているか」を、本社から一括で確認・レポート化。 |
| **RE が実現する価値** | RE を OWASP ZAP 等に付加すると、**本社から「全社のパブリックエンドポイントリスト」を管理**し、「どのエンドポイントを、どの拠点からチェックするか」を指定して、**Surface セキュリティチェックを一元化**できる。結果は**同一フォーマット（フラット JSON）**で返るため、本社で一括集約・比較・レポート化が容易。**「全社のパブリックエンドポイント管理と Surface セキュリティチェックの一元化」を、RE が実現する**。 |
| **コストメリットとの相乗効果** | 「全社のパブリックエンドポイント管理と Surface セキュリティチェックの一元化」により、**コスト削減・標準化・コンプライアンス対応**の価値がさらに大きくなる。各拠点に個別に依頼・管理する必要がなくなり、本社から一括で実行・管理できるため、**コストメリットが明確**になる。 |
| **結論** | **全社のパブリックエンドポイントをグローバル本社で管理し、Surface セキュリティチェックを一元化できる**という価値は、RE の「ボーダレスで柔軟なリクエスト形成プラットフォーム」としての強みと直結し、グローバル企業・上場企業にとって**明確な価値提案**になる。 |

#### サプライチェーン傘下のグローバル企業も一緒にできる？（まぁ嫌がるだろうけど）

**技術的には、サプライチェーン傘下のグローバル企業（取引先・子会社・パートナー等）のパブリックエンドポイントも、本社から一括で Surface セキュリティチェックの対象に含めることはできる**。ただし、**嫌がるだろうけど**、という現実がある。

| 観点 | 内容 |
|------|------|
| **技術的には可能** | 本社が「全社のパブリックエンドポイントリスト」に**サプライチェーン先の URL** を追加し、RE ＋ ZAP 等で多拠点からチェックすれば、**サプライチェーン傘下のグローバル企業も一緒に** Surface セキュリティチェックの対象にできる。RE の「ボーダレスで柔軟なリクエスト形成プラットフォーム」としては、自社拠点でも他社（サプライチェーン先）のパブリックエンドポイントでも、**同じ仕組みで実行可能**。 |
| **嫌がる理由** | サプライチェーン先は、**自社のパブリックエンドポイントを親会社・取引先から一括でスキャンされること**を嫌がる例がある。理由の例：<br>1. **プライバシー・競合情報**: 自社の公開範囲・技術スタック・設定が親会社に筒抜けになる懸念。<br>2. **セキュリティポリシー**: 「自社以外のスキャンは許可しない」ポリシーを持っている場合がある。<br>3. **主権・信頼**: チェックされる側が「上から目線で監査される」と感じ、関係性が悪化する懸念。<br>4. **契約・法的**: 勝手にスキャンすると**許可のないアクセス**とみなされるリスク。契約上・運用上、**事前同意・契約条項**が必要になりやすい。 |
| **本社にとってのメリット** | サプライチェーン全体の Surface セキュリティを**一枚岩で可視化**できると、**サプライチェーンリスク**の管理・コンプライアンス（サードパーティリスク）の証跡として価値が大きい。一方で、**嫌がる相手を無理に含めると信頼を損なう**ので、**同意を得た範囲**で対象を広げる運用が現実的。 |
| **結論** | **サプライチェーン傘下のグローバル企業も一緒にできる**のは技術的には正しい。ただし**嫌がるだろうけど**なので、**同意・契約の取れた取引先から段階的に**「サプライチェーン含む Surface セキュリティチェック一元化」を広げる前提で語るのが無難。RE の価値としては「自社＋同意済みサプライチェーン先を、本社から一括で管理・チェックできる」までを含めておくと、訴求の幅が広がる。 |

#### 「こんなものつくる人居るの？」— 超ニッチであることの評価

**このポジショニングは「こんなものつくる人居るの？」って感じの超ニッチ**である。それを正直に評価すると、メリットとデメリットの両方がある。

| 観点 | 内容 |
|------|------|
| **超ニッチである理由** | 「多拠点・同一契約のリクエスト実行基盤を OWASP ZAP 等に付加し、グローバル企業の脆弱性調査・全社パブリックエンドポイント管理・Surface セキュリティチェック一元化に使う」という**組み合わせ**を、**明示的に作っている人はほとんどいない**。汎用ペンテストツール（ZAP、Burp）は「単一拠点」前提、汎用プロキシ（WEBSHARE）は「IP 多様性」前提であり、「拠点選択・計測・単一契約」をペンテスト・Surface セキュリティに紐づけた产品は**少数**。だから「こんなものつくる人居るの？」と感じるのは自然。 |
| **超ニッチのメリット** | **競合がほぼいない＝ブルーオーシャン**。該当するニーズを持つ層（グローバル企業・上場企業のセキュリティチーム）には、**代替がなく、支払意思が高い**。超ニッチゆえに、**一度刺さると強い**。 |
| **超ニッチのデメリット** | **市場が小さい**。認知されにくく、「こんなニーズあるの？」と最初は思われやすい。**営業・訴求のコスト**がかかる。また、「作る人がほとんどいない」＝**ノウハウ・事例が少ない**ため、自前で作り込む必要がある。 |
| **結論** | **超ニッチであることは事実**。「こんなものつくる人居るの？」という感覚は正しい。そのうえで、**超ニッチだからこそブルーオーシャン**であり、該当するニーズを持つ層には明確な価値とコストメリットを出せる。ニッチを**割り切って狙う**か、**ウォームアップ・Surface 調査・AI データ収集**など別用途も含めて「ボーダレスで柔軟なリクエスト形成プラットフォーム」として広く打ち出すかは、戦略次第。 |

#### SaaS のコモディティ化とアイデア独創性によるブルーオーシャンニッチ

**SaaS がコモディティ化するなか、アイデア独創性によるブルーオーシャンニッチは悪くない。むしろ良い戦略**と評価できる。

| 観点 | 内容 |
|------|------|
| **SaaS のコモディティ化の現状** | 汎用的な SaaS（CRM、プロジェクト管理、チャット、ストレージ等）は**機能・価格で差別化しにくく、競合が多い**。多くの SaaS が「似たような機能を、似たような価格で」提供し、**レッドオーシャン**になっている。 |
| **アイデア独創性によるブルーオーシャンニッチの価値** | **「こんなものつくる人居るの？」レベルの独創的なアイデア**で、**ニッチだが明確なニーズ**を持つ層を狙うと、**競合がほぼいない＝ブルーオーシャン**になる。RE の「多拠点・同一契約のリクエスト実行基盤を OWASP ZAP 等に付加し、グローバル企業の脆弱性調査・全社パブリックエンドポイント管理・Surface セキュリティチェック一元化に使う」という**組み合わせ**は、**アイデアの独創性**が高い。 |
| **コモディティ化との対比** | 汎用 SaaS は「機能・価格で競う」ため、**コモディティ化しやすい**。一方、RE のような「アイデア独創性によるブルーオーシャンニッチ」は、**「こんな組み合わせ、こんな用途」を最初に思いついて作る**ため、**コモディティ化しにくい**。真似するには「同じアイデア」が必要で、単に機能を追加するだけでは追いつけない。 |
| **RE のポジショニングとの一致** | RE は「ボーダレスで柔軟なリクエスト形成プラットフォーム」として、**「多拠点・同一契約・拠点選択・計測・プラグイン選択／カスタマイズ」という独創的な組み合わせ**で、**グローバル企業の脆弱性調査・全社パブリックエンドポイント管理・Surface セキュリティチェック一元化**というニッチに特化している。これは**アイデア独創性によるブルーオーシャンニッチ**の典型例。 |
| **結論** | **SaaS がコモディティ化するなか、アイデア独創性によるブルーオーシャンニッチは悪くない。むしろ良い戦略**。汎用 SaaS のレッドオーシャンで戦うのではなく、**「こんなものつくる人居るの？」レベルの独創的なアイデア**で、**ニッチだが明確なニーズ・高い支払意思**を持つ層を狙うことで、**ブルーオーシャンを維持しやすい**。RE のポジショニングは、この戦略に合致している。 |

---

### マルチクラウド Request Engine のマーケ — 主に 3 つの顔

**マルチクラウドリクエストエンジンは、主に 3 つの顔でマーケする**。

| 顔 | 用途 | 訴求のポイント |
|------|------|------------------|
| **1. Cache Warmup** | **キャンペーン直前など**のキャッシュウォームアップ。配信開始前・更新後に、複数リージョンから対象 URL へ GET してエッジを温める。 | 「キャンペーン本番で冷えてるのはもったいない」「複数リージョンから一括で温められる」「同一契約・同一フォーマットで結果を揃えられる」。 |
| **2. SEO 調査** | 多拠点から同一 URL にアクセスし、**レスポンスの差（ステータス・ヘッダ・TTFB・地域別の出し分け）**を把握。SEO 観点での「各地域から見た挙動」の可視化。 | 「東京・シンガポール・欧州・米国から見た応答の差を一度に把握」「GEO 分散で地域別インデックス・表示の検証」。 |
| **3. Surface Vulnerability 調査** | 全社のパブリックエンドポイントを本社で管理し、**Surface セキュリティチェックを一元化**。OWASP ZAP 等に RE を付加し、複数拠点から脆弱性調査を実行。 | 「本社から他拠点に対して実行」「GEO 分散は ZAP/Burp 標準ではできないので RE が補う」「ブルーオーシャンかつ明確なコストメリット」。 |

**3 つの顔の共通土台**：いずれも**「ボーダレスで柔軟なリクエスト形成プラットフォーム」**であり、**多拠点・同一契約・拠点選択・計測**が共通。マーケでは**用途別に顔を切り替え**（Cache Warmup 向け／SEO 調査向け／Surface Vulnerability 調査向け）し、土台は同じであることを示す。

---

## まとめ

- **リクエスト構造から理解する** = 各ステージを「入力の形 → 出力の形」で押さえること。  
- API Gateway の図は、その**境界と変換**の名前を表している。  
- Request Engine は、その境界を 1 本のサーバレス関数に押し込んだ「使い捨て的」な実装だが、**役割の対応関係は同じ**だから、この「構造ビュー」のまま設計・実装・説明できる。  
- この視点を共有すると、設計と開発速度が良い意味で変わる。

---

*EO Request Engine — Nishi Labo*

